<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<title>创建对象的几种方法 - 未来某天</title>
		<link rel="stylesheet" type="text/css" href="/css/style.css" />
		<link rel="stylesheet" type="text/css" href="/css/syntax.css" />
		<link href="desert.css" rel="stylesheet" type="text/css" media="all">
		<div id="disqus_thread"></div>
		<script type="text/javascript" src="prettify.js">
    	    var disqus_shortname = 'xushao'; // required: replace example with your forum shortname
    		(function () {
       		 var s = document.createElement('script'); s.async = true;
        	s.type = 'text/javascript';
        	s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        	(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
   			 }());
    </script>
	</head>

	<body>
		<div id="logo">
			<h1><a href="/">未来某天</a></h1>
		</div>
		<div id="wrapper">
			<div id="content">
				<h2>创建对象的几种方法</h2>
				<div class="cnt">
					<p><!-- h1. 创建对象的几种方法 --></p>
<p><!-- p(meta). 2014年05月25日21:58:01 - 徐同同 --></p>
<p>最近写了一个播放器，demo中需要创建video的实例对象，总结一下创建对象的几种方法。</p>
<p>First,创建一个Video的Class，然后创建对象<br />
<pre class="prettyprint"><br />
Video <strong>video = [[Video alloc] init];<br />
video.name = @&quot;first video&quot;;<br />
</pre><br />
Second,创建一个Object实例，动态添加属性<br />
<pre class="prettyprint"><br />
NSObject *video = [[NSObject alloc] init];<br />
objc_setAssociatedObject(video, &#8220;name&#8221;, @&quot;second video&quot;, OBJC_ASSOCIATION_COPY);<br />
</pre><br />
Third,动态创建video类，然后创建实例<br />
<pre class="prettyprint"><br />
const char *className = &#8220;Video&#8221;;<br />
Class kClass = objc_getClass(className);<br />
if (!kClass) {<br />
    Class superClass = [NSObject class];<br />
    kClass = objc_allocateClassPair(superClass, className, 0);<br />
}<br />
NSUInteger size;<br />
NSUInteger alignment;<br />
NSGetSizeAndAlignment(&quot;</strong>&quot;, &amp;size, &amp;alignment);<br />
class_addIvar(kClass, &#8220;name&#8221;, size, alignment, &#8220;*&#8221;);<br />
//注册到运行时<br />
objc_registerClassPair(kClass);</p>
<p>id video = [[kClass alloc] init];<br />
[video setValue:<code>"third video" forKey:</code>&#8220;name&#8221;];<br />
</pre></p>
					<p id="state">若无特别说明，本站文章均为原创，转载请保留链接，谢谢</p>
				</div>
				<div id="disqus_thread"></div>
			</div>

			<div id="footer">
				<p>如无特殊说明，本站内容采用 <a title="CC BY-NC-SA 3.0" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh">CC BY-NC-SA 3.0</a> 进行许可</p>
				<p>自由转载-非商用-非衍生-保持署名</p>
				<p style="clear:both"></p>
			</div>
		</div>
	</body>
</html>

