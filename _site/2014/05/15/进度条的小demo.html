<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<title>进度条的小demo - 未来某天</title>
		<link rel="stylesheet" type="text/css" href="/css/style.css" />
		<link rel="stylesheet" type="text/css" href="/css/syntax.css" />
		<link href="desert.css" rel="stylesheet" type="text/css" media="all">
		<div id="disqus_thread"></div>
		<script type="text/javascript" src="prettify.js">
    	    var disqus_shortname = 'xushao'; // required: replace example with your forum shortname
    		(function () {
       		 var s = document.createElement('script'); s.async = true;
        	s.type = 'text/javascript';
        	s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        	(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
   			 }());
    </script>
	</head>

	<body>
		<div id="logo">
			<h1><a href="/">未来某天</a></h1>
		</div>
		<div id="wrapper">
			<div id="content">
				<h2>进度条的小demo</h2>
				<div class="cnt">
					<p><!-- h1. 进度条的小demo --></p>
<p><!-- p(meta). 2014年05月27日14:15:51 - 徐同同 --></p>
<p>用到了 &#8211; (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets resizingMode:(UIImageResizingMode)resizingMode NS_AVAILABLE_IOS(6_0);</p>
<p>效果图：<br />
<a href="/"><img id="home" alt="Home" src="/files/进度条的小demo/progress.gif" /></a><br />
素材：<br />
背景边框： <a href="/"><img id="home" alt="Home" src="/files/进度条的小demo/back.png" /></a><a href="/"><br />
填充的颜色块：<img id="home" alt="Home" src="/files/进度条的小demo/content.png" /></a></p>
<pre class="prettyprint">
- (void)viewDidLoad
{
    [super viewDidLoad];
    
    UIImageView *back = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 22, 122)];
    back.center = CGPointMake(160, 200);
    back.image = [UIImage imageNamed:@"back"];
    [self.view addSubview:back];
    
    //填充的色块，可以用纯色或者渐变。

    //UIImageResizingModeStretch为拉伸

    //UIEdgeInsetsMake(10, 0, 10, 0)为设置该范围内的进行拉伸

    UIImageView *content = [[UIImageView alloc] initWithFrame:CGRectMake(2, 2, 18, 118)];
    content.image = [[UIImage imageNamed:@"content"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 0, 10, 0) resizingMode:UIImageResizingModeStretch];
    content.tag = 1;
    [back addSubview:content];
    
    
    UISlider *slider = [[UISlider alloc] initWithFrame:CGRectMake(0, 0, 100, 30)];
    slider.center = CGPointMake(160, 60);
    slider.value = 1.0;
    [slider addTarget:self action:@selector(sliderValue:) forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:slider];
    
}

- (void)sliderValue:(UISlider *)sender
{
    [[self.view viewWithTag:1] setFrame:[self rectWithProgress:sender.value]];
}

//根据进度调整frame
- (CGRect)rectWithProgress:(CGFloat)progress
{
    CGRect origionRect = CGRectMake(2, 2, 18, 118);
    CGFloat height = CGRectGetHeight(origionRect) * progress;
    return CGRectMake(2, 120 - height, 18, height);
}
</pre>
<p>resizableImageWithCapInsets:UIEdgeInsetsMake(10, 0, 10, 0)的效果解释：<br />
<img id="home" alt="Home" src="/files/进度条的小demo/1337621781_7225.png" /></a></p>
					<p id="state">若无特别说明，本站文章均为原创，转载请保留链接，谢谢</p>
				</div>
				<div id="disqus_thread"></div>
			</div>

			<div id="footer">
				<p>如无特殊说明，本站内容采用 <a title="CC BY-NC-SA 3.0" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh">CC BY-NC-SA 3.0</a> 进行许可</p>
				<p>自由转载-非商用-非衍生-保持署名</p>
				<p style="clear:both"></p>
			</div>
		</div>
	</body>
</html>

